---
create: 2023-07-08
---
## TCP套接字编程

套接字：应用基础与端到端传输协议之间的门户

TCP服务：从一个进程向另一个进程可靠地传输字节流

#### 编程流程

##### 服务器首先运行，等待连接建立

1.服务器进程必须先处于运行状态

* 创建欢迎socket
* 和本地端口捆绑
* 在欢迎socket上阻塞式等待接收用户的连接

##### 客户端和服务器建立连接

2.创建客户端本地套接字（同时隐式捆绑到本地port）

* 指定服务器进程的IP地址和端口号，与服务器进程连接

3.当与客户端连接请求到来时

* 服务器接收来自客户端的请求，解除阻塞式等待，返回一个新的socket（与欢迎socket不一样），与客户端通信
	* 允许服务器与多个客户端通信
	* 使用源IP和源端口来区分不同的客户端

4.连接API调用有效时，客户端与服务器建立了TCP连接