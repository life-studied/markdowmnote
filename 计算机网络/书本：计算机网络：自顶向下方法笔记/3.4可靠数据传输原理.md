## 3.4可靠数据传输原理

根据双方缓冲区大小，可分为：

* stop and wait 协议：发送缓冲区 = 1，接收缓冲区 = 1
* GBN(go back N)协议：发送缓冲区 > 1，接收缓冲区 = 1
* SR(selective receive)协议：发送缓冲区 > 1，接收缓冲区 > 1

#### 1.stop and wait协议

最简单的协议，用于短距离局域网。在发送一个分组之后一直等待ACK，直到Timer结束。

#### 2.GBN协议

* 一次发送k个包，要求必须按顺序到达接收缓冲区。只设置一个Timer。

* 如果接收缓冲区收到的不是顺序到达的第一个包，则丢掉并回复已经完成的上一个ACK。
* Timer结束未收到下一个ACK，则缓冲区所有的包重发。
* 正常则移动缓冲区。

#### 3.SR协议

* 一次发送k个包。对每个包设置一个Timer。
* 接收缓冲区收到一个包，返回当前包的ACK。发送缓冲区取消对应包的Timer。
* Timer结束，再次发送对应的包。并移动缓冲区。