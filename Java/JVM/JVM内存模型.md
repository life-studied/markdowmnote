---
create: '2025-05-04'
modified: '2025-05-04'
---

# JVM内存模型

JVM 内存模型是在运行 Java 程序时对物理内存的**具体划分和管理方式**，用来保证 Java 程序正常执行的。

- **目的**：定义 Java 程序在运行时如何分配、使用和回收内存。
- **核心组成**：
    - **堆（Heap）**：存储对象实例（所有线程共享）。
    - **方法区（Method Area）**：存储类信息、常量等（JDK8 后由元空间实现）。
    - **虚拟机栈（VM Stack）**：存储方法的局部变量、操作数栈（每个线程私有）。
    - **本地方法栈（Native Method Stack）**：服务于 JVM 调用本地方法。
    - **程序计数器（Program Counter Register）**：记录线程当前执行的指令地址。

### JVM不划分内存区域行不行？

* 效率慢：从理论上来讲可能是可行的，但从程序的运行效率、垃圾回收的效率等方面来讲不划分内存区域，所有的信息放到一起，其效率是非常慢的。
* 数据意外污染：同时，不划分区域可能会导致**关键数据易被污染的问题**，例如：
    * 方法区存储的类元数据（如类结构、静态变量）需要长期存在且全局共享，若与临时变量混存，可能导致类信息被意外覆盖。
    * 在热加载类时，新类元数据可能覆盖正在被其他线程使用的旧版本，引发不可预知的错误。