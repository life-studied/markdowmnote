## 友元

#### 15.1.1友元类

> 类能将类作为友元。这意味着该友元的所有成员函数可以访问原始类，但其成员变量并不具有访问权限。
>
> 其中，可以使一个友元类中的指定成员函数可以访问原始类的成员。也可以使整个友元中的函数都能访问。

**语法**

> 在原始类的声明中写明：
>
> friend class 友元类名

```c++
class Tv
{
public:
    friend class Remote;
    ...
}
```

**注意：友元类应在原始类之后声明，或者使用前向声明**

#### 15.1.2 友元成员函数

> 如果仅仅只是需要某个或几个类成员函数与原始类交互，则可以使用友元成员函数。

**语法**

> 在原始类声明中将其声明为友元函数

```c++
class Tv
{
    friend void Remote::set_chan(Tv &t, int c);
    ...
};
```

**注意：这又需要友元函数声明出现在原始类前**

---

**解决方案**

> 前向声明

```c++
class Tv;				//使Remote中的函数明确Tv类
class Remote{...};		//使Tv类明确友元函数
class Tv{...};
```

> 此处，将Tv作为前向声明而不是Remote的原因是，Remote只需要类声明，而Tv需要的是函数声明。
>
> 如果Remote在前，则找不到函数声明，只有类声明。

**另外，如果Remote声明中有内联函数直接调用了Tv的函数，则应该将其移除声明，置于外部定义**



#### 15.1.3其它友元关系

> 有时，需要几个类互为彼此的友元。此时，可以在各自的类中定义：

**注：整个类作为友元类，不需要前向声明，因为友元声明本身已经说明了这是一个类。**



#### 15.1.4共同的友元

> 另一种需要友元的情况，是一个函数需要访问两个类的私有数据。

在这种情况下，一般函数需要两个类的参数，而这意味着在一个类中先使用友元，而必须在此之前给出另一个类的前向声明。

